<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <div class="grid">
      <div id="stream">
        <script>

          $(document).ready(function(){
            var $stream = $('#stream');
            // $body.html('');

            var previousIndex = 0;
            var currentDate = new Date();
            var clickHandler = function(){
              var $tweet = $('<div></div>');
              $tweet.html('New tweets since: ' + currentDate);
              $tweet.appendTo($stream);
              var index = streams.home.length - 1;
              while(index >= previousIndex){
                var tweet = streams.home[index];
                $tweet = $('<div></div>');
                $tweet.text('@' + tweet.user + ': ' + tweet.message + ' Created on: ' + tweet.created_at);
                $tweet.appendTo($stream);
                index -= 1;
              }
              previousIndex = streams.home.length;
              currentDate = new Date();
            }

            clickHandler();

            $('#refresh').on('click', clickHandler);
          });

        </script>
      </div>
      <button class="btn btn-default target" id="refresh">Refresh Tweets</button>
    </div>
  </body>
</html>
